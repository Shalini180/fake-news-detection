<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>FactLens ‚Äì AI-Powered Misinformation Research</title>
    <meta name="description" content="Research-grade misinformation analysis with explainable AI" />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@600;700&family=Crimson+Pro:wght@400;500&display=swap"
        rel="stylesheet">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <!-- Stylesheets -->
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- Toast Container -->
    <div id="toastContainer"></div>

    <!-- Application Header -->
    <header class="app-header">
        <div class="header-left">
            <div class="app-title">üì∞ FactLens</div>
            <div class="app-subtitle">AI-Powered Misinformation Research</div>
        </div>
        <div class="header-right">
            <button id="btnToggleTheme" class="btn-ghost" type="button">üåó Theme</button>
            <button id="btnExportSession" class="btn-ghost" type="button">‚¨á Export Session</button>
        </div>
    </header>

    <!-- Main Three-Column Layout -->
    <div class="app-layout">

        <!-- ========== LEFT PANEL: Article Analyzer ========== -->
        <aside class="panel-left">
            <div class="card card-analyzer">
                <div class="card-header">
                    <h2 class="app-title">üìù Article Analyzer</h2>
                    <p class="text-muted">Paste content or load a demo to analyze.</p>
                </div>

                <label for="articleTitle">Title (optional)</label>
                <input id="articleTitle" type="text"
                    placeholder="BREAKING: SHOCKING Discovery That Changes EVERYTHING!!!" />

                <label for="articleContent">Article Content</label>
                <textarea id="articleContent" rows="10" placeholder="Paste your article text here..."></textarea>

                <label for="articleSource">Source URL (optional)</label>
                <input id="articleSource" type="url" placeholder="https://example.com/article" />

                <button id="btnAnalyze" class="btn-primary" type="button">
                    üöÄ Analyze Article
                </button>

                <div class="demo-controls">
                    <select id="demoSelector" class="demo-select">
                        <option value="">Select Demo...</option>
                        <option value="credible">‚úÖ Credible Article</option>
                        <option value="suspicious">‚ö†Ô∏è Suspicious Article</option>
                        <option value="fake">‚ùå Fake News</option>
                        <option value="satire">üòÑ Satire</option>
                        <option value="mixed">üîÄ Mixed Signals</option>
                    </select>
                    <button id="btnLoadDemo" class="btn-ghost" type="button">
                        üé¨ Load Demo
                    </button>
                </div>
            </div>
        </aside>

        <!-- ========== CENTER PANEL: Tabs + Content ========== -->
        <main class="panel-center">

            <!-- Tab Navigation -->
            <nav class="tab-nav">
                <button class="tab-btn active" data-tab="overview">Overview</button>
                <button class="tab-btn" data-tab="explanations">Explanations</button>
                <button class="tab-btn" data-tab="claims">Claims & Evidence</button>
                <button class="tab-btn" data-tab="temporal">Temporal</button>
                <button class="tab-btn" data-tab="system">System</button>
            </nav>

            <!-- Tab Contents -->
            <div class="tab-contents">

                <!-- ===== OVERVIEW TAB ===== -->
                <section id="tab-overview" class="tab-content active">

                    <!-- Credibility Overview + Key Reasons -->
                    <section class="card card-overview-top">
                        <div class="card-row">
                            <div class="card-col">
                                <h3>üîç Credibility Overview</h3>
                                <canvas id="credibilityGauge"></canvas>
                                <div class="gauge-meta">
                                    <span id="gaugeScore">--%</span>
                                    <span id="gaugeLabel">Awaiting analysis</span>
                                    <span id="riskBadge" class="badge-risk">Pending</span>
                                </div>
                            </div>
                            <div class="card-col">
                                <h3>üß† Key Reasons</h3>
                                <ul id="keyReasonsList" class="list-reasons">
                                    <!-- JS populates reasons -->
                                </ul>
                            </div>
                        </div>
                    </section>

                    <!-- Uncertainty & Confidence -->
                    <section class="card card-overview-uncertainty">
                        <div class="card-header-inline">
                            <h3 class="app-title">üìâ Uncertainty & Confidence</h3>
                        </div>
                        <div class="uncertainty-grid">
                            <div class="uncertainty-left">
                                <canvas id="uncertaintyGauge"></canvas>
                                <p id="uncertaintySummary" class="text-muted">
                                    <!-- populated by formatUncertaintySummary() -->
                                </p>
                            </div>
                            <div class="uncertainty-right">
                                <canvas id="confidenceBandChart"></canvas>
                                <p id="ciTextHint" class="tiny-muted">
                                    <!-- populated by formatConfidenceIntervalHint() -->
                                </p>
                            </div>
                        </div>
                    </section>

                </section>

                <!-- ===== EXPLANATIONS TAB ===== -->
                <section id="tab-explanations" class="tab-content">
                    <div class="explanations-grid">

                        <section class="card card-attention">
                            <h3>üß† Attention Heatmap</h3>
                            <div id="attentionHeatmap" class="attention-container article-body"></div>
                        </section>

                        <section class="card card-features">
                            <h3>üìä Feature Importance</h3>
                            <canvas id="featureChart"></canvas>
                        </section>

                        <section class="card card-phrases">
                            <h3>üö© Suspicious Phrases</h3>
                            <div id="suspiciousPhrases" class="phrases-grid"></div>
                        </section>

                        <section class="card card-breakdown">
                            <h3>üìê Uncertainty Breakdown</h3>
                            <table id="uncertaintyBreakdown" class="data-table">
                                <!-- renderUncertaintyBreakdown() fills rows -->
                            </table>
                        </section>

                    </div>
                </section>

                <!-- ===== CLAIMS & EVIDENCE TAB ===== -->
                <section id="tab-claims" class="tab-content">
                    <section class="card card-claims-main">
                        <div class="claims-header-row">
                            <h3>üßæ Claims & Evidence</h3>
                            <div class="claim-filters">
                                <button class="btn-ghost claim-filter active" data-filter="all">All</button>
                                <button class="btn-ghost claim-filter" data-filter="verified">Verified</button>
                                <button class="btn-ghost claim-filter" data-filter="unverified">Unverified</button>
                                <button class="btn-ghost claim-filter" data-filter="disputed">Disputed</button>
                            </div>
                        </div>

                        <div class="claims-layout">
                            <div class="claims-list" id="claimsList">
                                <!-- JS populates claims -->
                            </div>
                            <div class="claims-graph">
                                <h4>Knowledge Graph Map</h4>
                                <div id="knowledgeGraph"></div>
                            </div>
                        </div>
                    </section>
                </section>

                <!-- ===== TEMPORAL TAB ===== -->
                <section id="tab-temporal" class="tab-content">
                    <div class="temporal-grid">

                        <section class="card">
                            <h3>‚è± Credibility Trends Over Time</h3>
                            <canvas id="timeSeriesChart"></canvas>
                        </section>

                        <section class="card">
                            <h3>üìä Score Distribution</h3>
                            <canvas id="distributionChart"></canvas>
                        </section>

                    </div>
                </section>

                <!-- ===== SYSTEM TAB ===== -->
                <section id="tab-system" class="tab-content">

                    <div class="system-stats-grid">
                        <div class="card stat-card">
                            <h4>Total Analyses</h4>
                            <p id="statTotalAnalyses" class="stat-value">0</p>
                        </div>
                        <div class="card stat-card">
                            <h4>Avg Credibility</h4>
                            <p id="statAvgCredibility" class="stat-value">--%</p>
                        </div>
                        <div class="card stat-card">
                            <h4>High Risk Count</h4>
                            <p id="statHighRisk" class="stat-value">0</p>
                        </div>
                        <div class="card stat-card">
                            <h4>Session Duration</h4>
                            <p id="statDuration" class="stat-value">0m</p>
                        </div>
                    </div>

                    <section class="card card-limitations">
                        <h4>‚ö†Ô∏è Model Limitations</h4>
                        <p>FactLens is an assistive tool designed to support human judgment, not replace it. Please be
                            aware of the following limitations:</p>
                        <ul>
                            <li>The model may produce false positives or false negatives</li>
                            <li>Performance varies with article length, language, and domain</li>
                            <li>Emerging manipulation techniques may not be detected</li>
                            <li>Cultural context and nuance may be missed</li>
                            <li>Always verify critical information with multiple sources</li>
                        </ul>
                    </section>

                </section>

            </div>
        </main>

        <!-- ========== RIGHT PANEL: History ========== -->
        <aside class="panel-right">
            <div class="history-panel">
                <h3>üìä Session History</h3>
                <div id="historyList">
                    <!-- JS will add .history-item entries -->
                </div>
                <button id="btnClearHistory" class="btn-ghost" type="button">
                    üóëÔ∏è Clear History
                </button>
            </div>
        </aside>

    </div>

    <!-- Mobile History Overlay -->
    <div id="historyOverlay" class="history-overlay">
        <div class="history-overlay-content">
            <h3>Session History</h3>
            <div id="historyListMobile">
                <!-- mobile rendering -->
            </div>
        </div>
    </div>

    <!-- Comparison Modal -->
    <div id="comparisonModal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <h3>Compare Analyses</h3>
            <div id="comparisonGrid" class="comparison-grid">
                <!-- JS fills in comparison columns -->
            </div>
            <button id="btnCloseComparison" class="btn-ghost" type="button">Close</button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="visualizations.js" defer></script>
    <script src="app.js" defer></script>
</body>

</html>